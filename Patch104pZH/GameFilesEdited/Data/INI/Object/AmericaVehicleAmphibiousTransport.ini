; Patch104p Jundiyy 20/10/2021 Made a carbon copy to make this unit more useful and not break maps that use the original.

;------------------------------------------------------------------------------
Object AmericaVehicleAmphibiousTransport

  ; *** ART Parameters ***

  SelectPortrait         = SSFerry_L ; @todo
  ButtonImage            = SSFerry_L

  Draw              = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState  = NONE
      Model         = AVAMPHIB

      Animation     = AVAMPHIB.AVAMPHIB ; fans off
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End

    ConditionState  = OVER_WATER
      Model         = AVAMPHIB
      ParticleSysBone = TreadFX01 AmphibWaveRest
      Animation     = AVAMPHIB.AVAMPHIB ; fans off
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End

    ConditionState  = MOVING
      Model         = AVAMPHIB
      ParticleSysBone = Exhaust01 SteamVent ;Want turned off until better solution or final cut solution is reached
      ParticleSysBone = Exhaust02 SteamVent
       ParticleSysBone = Mist01 AmphibDirt
;      ParticleSysBone = Mist01 AmphibDirtClods

;      ParticleSysBone = TreadFX01 RocketBuggyDust

      Animation     = AVAMPHIB.AVAMPHIB ; fans on
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End
    ConditionState  = MOVING OVER_WATER
      Model         = AVAMPHIB
      ParticleSysBone = Exhaust01 SteamVent
      ParticleSysBone = Exhaust02 SteamVent

      ParticleSysBone = Mist01 AmphibMist
      ParticleSysBone = Mist02 AmphibMist
      ParticleSysBone = Mist03 AmphibMistSide
      ParticleSysBone = Mist04 AmphibMistSide
      ParticleSysBone = TreadFX01 AmphibWave
      ParticleSysBone = TreadFX02 AmphibWave
      Animation     = AVAMPHIB.AVAMPHIB ; fans on
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End
  End

  ; The exit door
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model         = AVAMPHIB_A
      Animation     = AVAMPHIB_A.AVAMPHIB_A
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End
    ConditionState  = DOOR_1_OPENING
      Model         = AVAMPHIB_A
      Animation     = AVAMPHIB_A.AVAMPHIB_A
      AnimationMode = ONCE
      Flags         = START_FRAME_FIRST
    End
    ConditionState  = DOOR_1_CLOSING
      Model         = AVAMPHIB_A1
      Animation     = AVAMPHIB_A1.AVAMPHIB_A1
      AnimationMode = ONCE
      Flags         = START_FRAME_FIRST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:AmphibiousTransport
  Side                  = America
  EditorSorting         = VEHICLE
  CommandSet            = AmericaTransportCommandSet

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End

  WeaponSet
    Conditions      = None
    Weapon          = PRIMARY None
  End

  BuildCost       = 700
  BuildTime       = 10.0          ;in seconds
  VisionRange     = 150
  ShroudClearingRange = 150
  Prerequisites
  End
  ExperienceValue    = 50 50 50 50 ;Experience point value at each level
  IsTrainable     = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = AmphibiousTransportVoiceSelect
  VoiceMove             = AmphibiousTransportVoiceMove
  VoiceGuard            = AmphibiousTransportVoiceMove
  SoundMoveLoop = AmphibiousTransportMoveLoop
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    VoiceCreate         = AmphibiousTransportVoiceCreate
    VoiceUnload         = AmphibiousTransportVoiceUnload
    VoiceEnter          = AmphibiousTransportVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD SELECTABLE VEHICLE TRANSPORT CAN_CAST_REFLECTIONS SCORE 

  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 600.0
    InitialHealth   = 600.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior              = TransportContain ModuleTag_04
    Slots               = 8
    AllowInsideKindOf   = INFANTRY VEHICLE
    DoorOpenTime        = 2000
    ScatterNearbyOnExit = No ; I have bones for exiting
  End
  Behavior          = PhysicsBehavior ModuleTag_05
    Mass            = 30.0
  End
  Behavior = TransportAIUpdate ModuleTag_06
    ;<NO DATA>
  End
  Locomotor         = SET_NORMAL BasicAmphibiousLocomotor
  Behavior               = DestroyDie ModuleTag_07
    ;<NO DATA>
  End
  Behavior               = CreateObjectDie ModuleTag_08
    DeathTypes = ALL
    CreationList    = OCL_AmphibiousTransportDeathFinalBlowUp
  End
  Behavior               = FXListDie ModuleTag_09
    DeathTypes = ALL -FLOODED
    DeathFX         = FX_GenericCarExplode
  End

  Behavior = CreateCrateDie ModuleTag_Crate16 ;Leaves scrap
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry            = BOX
  Scale = 0.85                            ;Scaling
  GeometryIsSmall     = No
  GeometryMajorRadius = 23.0
  GeometryMinorRadius = 17.0
  GeometryHeight      = 20.0
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object AmphibiousTransportHulk

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = AVAMPHIB
    End
  End

  ;; The exit door
  ;Draw = W3DModelDraw ModuleTag_02
  ;  DefaultConditionState
  ;    Model           = AVAMPHIB_A
  ;  End
  ;End

  ; ***DESIGN parameters ***
  EditorSorting       = DEBRIS

  ; *** ENGINEERING Parameters ***
  KindOf              =  NO_COLLIDE HULK

  Behavior                  = PhysicsBehavior ModuleTag_03
    Mass                    = 2.0
    AllowBouncing           = No
    KillWhenRestingOnGround = Yes
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 1500   ; min lifetime in msec
    MaxLifetime = 1600   ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay        = 1500
    SinkRate         = 2     ; in Dist/Sec
    DestructionDelay = 8000
  End

  Scale = 0.85                            ;Scaling
End

;------------------------------------------------------------------------------
Object AmphibiousTransportDoor

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = AVAMPHIB_A
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting       = DEBRIS

  ; *** ENGINEERING Parameters ***
  KindOf              =  NO_COLLIDE HULK

  Behavior                  = PhysicsBehavior ModuleTag_03
    Mass                    = 3.0
    AllowBouncing           = No
    KillWhenRestingOnGround = Yes
  End

  ;Behavior = LifetimeUpdate ModuleTag_04
  ;  MinLifetime = 1500   ; min lifetime in msec
  ;  MaxLifetime = 1600   ; max lifetime in msec
  ;End

  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay        = 1500
    SinkRate         = 2     ; in Dist/Sec
    DestructionDelay = 8000
  End

  Scale = 0.85                            ;Scaling
End
